{"ast":null,"code":"import _regeneratorRuntime from\"/Users/edwardplasencio/Desktop/punchCode/white-bear-fullstack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/edwardplasencio/Desktop/punchCode/white-bear-fullstack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/edwardplasencio/Desktop/punchCode/white-bear-fullstack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/edwardplasencio/Desktop/punchCode/white-bear-fullstack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/edwardplasencio/Desktop/punchCode/white-bear-fullstack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/edwardplasencio/Desktop/punchCode/white-bear-fullstack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import classnames from\"classnames\";import hash from\"object-hash\";import{v4 as getUuid}from\"uuid\";import{EMAIL_REGEX}from\"../../utils/helpers\";import axios from\"axios\";import actions from\"../../store/actions\";import{connect}from\"react-redux\";import{withRouter}from\"react-router-dom\";var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.state={hasLoginBeenClicked:false,emailError:\"\"};return _this;}_createClass(Login,[{key:\"loginClicked\",value:function loginClicked(){this.setState({hasLoginBeenClicked:true,emailError:\"\",passwordError:\"\",hasEmailError:false});}},{key:\"setEmailState\",value:function(){var _setEmailState=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var emailInput,lowerCasedEmailInput;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:emailInput=document.getElementById(\"Login-email\").value;lowerCasedEmailInput=emailInput.toLowerCase();if(emailInput===\"\")this.setState({emailError:\"Please enter email address.\",hasEmailError:true});else if(EMAIL_REGEX.test(lowerCasedEmailInput)===false){this.setState({emailError:\"Please enter VALID email address.\",hasEmailError:true});}else{this.setState({emailError:\"\",hasEmailError:false});}case 3:case\"end\":return _context.stop();}}},_callee,this);}));function setEmailState(){return _setEmailState.apply(this,arguments);}return setEmailState;}()},{key:\"setPasswordState\",value:function(){var _setPasswordState=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(passwordInput,emailInput){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(passwordInput);if(passwordInput===\"\"){this.setState({passwordError:\"Please enter password.\",hasPasswordError:true});}else if(passwordInput.length<9){this.setState({passwordError:\"Password must be 9 characters.\",hasPasswordError:true});}else{this.setState({passwordError:\"\",hasPasswordError:false});}case 2:case\"end\":return _context2.stop();}}},_callee2,this);}));function setPasswordState(_x,_x2){return _setPasswordState.apply(this,arguments);}return setPasswordState;}()},{key:\"validateAndVerifyUser\",value:function(){var _validateAndVerifyUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var _this2=this;var emailInput,passwordInput,user;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log(\"Validate me!\");emailInput=document.getElementById(\"Login-email\").value;passwordInput=document.getElementById(\"Login-password\").value;_context3.next=5;return this.setEmailState(emailInput);case 5:_context3.next=7;return this.setPasswordState(passwordInput,emailInput);case 7:if(this.state.hasEmailError===false&&this.state.hasPasswordError===false){user={id:getUuid(),email:emailInput,password:hash(passwordInput),createdOn:Date.now()};console.log(\"created user object for POST\",user);axios.get(\"https://raw.githubusercontent.com/Edd-wordd/white-bear-mpa/master/src/mock%20data/user.JSON\").then(function(res){// handle success\nvar currentUser=res.data;console.log(currentUser);_this2.props.dispatch({type:actions.UPDATE_CURRENT_USER,payload:res.data});}).catch(function(error){// handle error\nconsole.log(error);});this.props.history.push(\"/create-answer\");}case 8:case\"end\":return _context3.stop();}}},_callee3,this);}));function validateAndVerifyUser(){return _validateAndVerifyUser.apply(this,arguments);}return validateAndVerifyUser;}()},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"offset-1 col-10 offset-sm-2 col-sm-8 offset-md-1 col-md-5 offset-lg-1 col-lg-4 offset-xl-1 col-xl-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card p-3 mb-5\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"card-title\"},\"Welcome back\"),/*#__PURE__*/React.createElement(\"p\",{className:\"mb-5\"},\"Log in with your email address and password.\"),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"Login-email\"},\"Email address\"),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",className:classnames({\"form-control\":true,\"is-invalid\":this.state.hasEmailError}),id:\"Login-email\"}),this.state.hasEmailError&&/*#__PURE__*/React.createElement(\"small\",{className:\" mb-3 text-danger\"},this.state.emailError),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"password\"},\"Password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",className:classnames({\"form-control\":true,\"is-invalid\":this.state.hasPasswordError}),id:\"Login-password\"}),this.state.hasPasswordError&&/*#__PURE__*/React.createElement(\"small\",{className:\" mb-3 text-danger\"},this.state.passwordError),/*#__PURE__*/React.createElement(\"button\",{id:\"loginPage\",className:\"btn btn-success float-right mt-4\",onClick:function onClick(){_this3.validateAndVerifyUser();}},\"Log in\")));}}]);return Login;}(React.Component);function mapStateToProps(state){return{};}export default withRouter(connect(mapStateToProps)(Login));","map":{"version":3,"sources":["/Users/edwardplasencio/Desktop/punchCode/white-bear-fullstack/client/src/components/UI/Login.js"],"names":["React","classnames","hash","v4","getUuid","EMAIL_REGEX","axios","actions","connect","withRouter","Login","props","state","hasLoginBeenClicked","emailError","setState","passwordError","hasEmailError","emailInput","document","getElementById","value","lowerCasedEmailInput","toLowerCase","test","passwordInput","console","log","hasPasswordError","length","setEmailState","setPasswordState","user","id","email","password","createdOn","Date","now","get","then","res","currentUser","data","dispatch","type","UPDATE_CURRENT_USER","payload","catch","error","history","push","validateAndVerifyUser","Component","mapStateToProps"],"mappings":"+kCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,UAAP,KAAuB,YAAvB,CACA,MAAOC,CAAAA,IAAP,KAAiB,aAAjB,CACA,OAASC,EAAE,GAAIC,CAAAA,OAAf,KAA8B,MAA9B,CACA,OAASC,WAAT,KAA4B,qBAA5B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,OAAP,KAAoB,qBAApB,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,UAAT,KAA2B,kBAA3B,C,GAEMC,CAAAA,K,0GACH,eAAYC,KAAZ,CAAmB,uCAChB,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CAAEC,mBAAmB,CAAE,KAAvB,CAA8BC,UAAU,CAAE,EAA1C,CAAb,CAFgB,aAGlB,C,qEACc,CACZ,KAAKC,QAAL,CAAc,CACXF,mBAAmB,CAAE,IADV,CAEXC,UAAU,CAAE,EAFD,CAGXE,aAAa,CAAE,EAHJ,CAIXC,aAAa,CAAE,KAJJ,CAAd,EAMF,C,0RAEQC,U,CAAaC,QAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,K,CACpDC,oB,CAAuBJ,UAAU,CAACK,WAAX,E,CAC7B,GAAIL,UAAU,GAAK,EAAnB,CACG,KAAKH,QAAL,CAAc,CACXD,UAAU,CAAE,6BADD,CAEXG,aAAa,CAAE,IAFJ,CAAd,EADH,IAKK,IAAIZ,WAAW,CAACmB,IAAZ,CAAiBF,oBAAjB,IAA2C,KAA/C,CAAsD,CACxD,KAAKP,QAAL,CAAc,CACXD,UAAU,CAAE,mCADD,CAEXG,aAAa,CAAE,IAFJ,CAAd,EAIF,CALI,IAKE,CACJ,KAAKF,QAAL,CAAc,CAAED,UAAU,CAAE,EAAd,CAAkBG,aAAa,CAAE,KAAjC,CAAd,EACF,C,uSAGmBQ,a,CAAeP,U,sHACnCQ,OAAO,CAACC,GAAR,CAAYF,aAAZ,EACA,GAAIA,aAAa,GAAK,EAAtB,CAA0B,CACvB,KAAKV,QAAL,CAAc,CACXC,aAAa,CAAE,wBADJ,CAEXY,gBAAgB,CAAE,IAFP,CAAd,EAIF,CALD,IAKO,IAAIH,aAAa,CAACI,MAAd,CAAuB,CAA3B,CAA8B,CAClC,KAAKd,QAAL,CAAc,CACXC,aAAa,CAAE,gCADJ,CAEXY,gBAAgB,CAAE,IAFP,CAAd,EAIF,CALM,IAKA,CACJ,KAAKb,QAAL,CAAc,CAAEC,aAAa,CAAE,EAAjB,CAAqBY,gBAAgB,CAAE,KAAvC,CAAd,EACF,C,0eAIDF,OAAO,CAACC,GAAR,CAAY,cAAZ,EACMT,U,CAAaC,QAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,K,CACpDI,a,CAAgBN,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0CC,K,wBAE1D,MAAKS,aAAL,CAAmBZ,UAAnB,C,+BACA,MAAKa,gBAAL,CAAsBN,aAAtB,CAAqCP,UAArC,C,QACN,GACG,KAAKN,KAAL,CAAWK,aAAX,GAA6B,KAA7B,EACA,KAAKL,KAAL,CAAWgB,gBAAX,GAAgC,KAFnC,CAGE,CACOI,IADP,CACc,CACVC,EAAE,CAAE7B,OAAO,EADD,CAEV8B,KAAK,CAAEhB,UAFG,CAGViB,QAAQ,CAAEjC,IAAI,CAACuB,aAAD,CAHJ,CAIVW,SAAS,CAAEC,IAAI,CAACC,GAAL,EAJD,CADd,CAOCZ,OAAO,CAACC,GAAR,CAAY,8BAAZ,CAA4CK,IAA5C,EACA1B,KAAK,CACDiC,GADJ,CAEM,6FAFN,EAIIC,IAJJ,CAIS,SAACC,GAAD,CAAS,CACZ;AACA,GAAMC,CAAAA,WAAW,CAAGD,GAAG,CAACE,IAAxB,CACAjB,OAAO,CAACC,GAAR,CAAYe,WAAZ,EACA,MAAI,CAAC/B,KAAL,CAAWiC,QAAX,CAAoB,CACjBC,IAAI,CAAEtC,OAAO,CAACuC,mBADG,CAEjBC,OAAO,CAAEN,GAAG,CAACE,IAFI,CAApB,EAIF,CAZJ,EAaIK,KAbJ,CAaU,SAACC,KAAD,CAAW,CACf;AACAvB,OAAO,CAACC,GAAR,CAAYsB,KAAZ,EACF,CAhBJ,EAiBA,KAAKtC,KAAL,CAAWuC,OAAX,CAAmBC,IAAnB,CAAwB,gBAAxB,EACF,C,6NAEK,iBACN,mBACG,2BAAK,SAAS,CAAC,qGAAf,eACG,2BAAK,SAAS,CAAC,eAAf,eACG,0BAAI,SAAS,CAAC,YAAd,iBADH,cAEG,yBAAG,SAAS,CAAC,MAAb,iDAFH,cAKG,6BAAO,OAAO,CAAC,aAAf,kBALH,cAMG,6BACG,IAAI,CAAC,OADR,CAEG,SAAS,CAAElD,UAAU,CAAC,CACnB,eAAgB,IADG,CAEnB,aAAc,KAAKW,KAAL,CAAWK,aAFN,CAAD,CAFxB,CAMG,EAAE,CAAC,aANN,EANH,CAcI,KAAKL,KAAL,CAAWK,aAAX,eACE,6BAAO,SAAS,CAAC,mBAAjB,EACI,KAAKL,KAAL,CAAWE,UADf,CAfN,cAoBG,6BAAO,OAAO,CAAC,UAAf,aApBH,cAqBG,6BACG,IAAI,CAAC,UADR,CAEG,SAAS,CAAEb,UAAU,CAAC,CACnB,eAAgB,IADG,CAEnB,aAAc,KAAKW,KAAL,CAAWgB,gBAFN,CAAD,CAFxB,CAMG,EAAE,CAAC,gBANN,EArBH,CA8BI,KAAKhB,KAAL,CAAWgB,gBAAX,eACE,6BAAO,SAAS,CAAC,mBAAjB,EACI,KAAKhB,KAAL,CAAWI,aADf,CA/BN,cAoCG,8BACG,EAAE,CAAC,WADN,CAEG,SAAS,CAAC,kCAFb,CAGG,OAAO,CAAE,kBAAM,CACZ,MAAI,CAACoC,qBAAL,GACF,CALJ,WApCH,CADH,CADH,CAkDF,C,mBAzIgBpD,KAAK,CAACqD,S,EA2I1B,QAASC,CAAAA,eAAT,CAAyB1C,KAAzB,CAAgC,CAC7B,MAAO,EAAP,CACF,CACD,cAAeH,CAAAA,UAAU,CAACD,OAAO,CAAC8C,eAAD,CAAP,CAAyB5C,KAAzB,CAAD,CAAzB","sourcesContent":["import React from \"react\";\nimport classnames from \"classnames\";\nimport hash from \"object-hash\";\nimport { v4 as getUuid } from \"uuid\";\nimport { EMAIL_REGEX } from \"../../utils/helpers\";\nimport axios from \"axios\";\nimport actions from \"../../store/actions\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\n\nclass Login extends React.Component {\n   constructor(props) {\n      super(props);\n      this.state = { hasLoginBeenClicked: false, emailError: \"\" };\n   }\n   loginClicked() {\n      this.setState({\n         hasLoginBeenClicked: true,\n         emailError: \"\",\n         passwordError: \"\",\n         hasEmailError: false,\n      });\n   }\n   async setEmailState() {\n      const emailInput = document.getElementById(\"Login-email\").value;\n      const lowerCasedEmailInput = emailInput.toLowerCase();\n      if (emailInput === \"\")\n         this.setState({\n            emailError: \"Please enter email address.\",\n            hasEmailError: true,\n         });\n      else if (EMAIL_REGEX.test(lowerCasedEmailInput) === false) {\n         this.setState({\n            emailError: \"Please enter VALID email address.\",\n            hasEmailError: true,\n         });\n      } else {\n         this.setState({ emailError: \"\", hasEmailError: false });\n      }\n   }\n\n   async setPasswordState(passwordInput, emailInput) {\n      console.log(passwordInput);\n      if (passwordInput === \"\") {\n         this.setState({\n            passwordError: \"Please enter password.\",\n            hasPasswordError: true,\n         });\n      } else if (passwordInput.length < 9) {\n         this.setState({\n            passwordError: \"Password must be 9 characters.\",\n            hasPasswordError: true,\n         });\n      } else {\n         this.setState({ passwordError: \"\", hasPasswordError: false });\n      }\n   }\n\n   async validateAndVerifyUser() {\n      console.log(\"Validate me!\");\n      const emailInput = document.getElementById(\"Login-email\").value;\n      const passwordInput = document.getElementById(\"Login-password\").value;\n\n      await this.setEmailState(emailInput);\n      await this.setPasswordState(passwordInput, emailInput);\n      if (\n         this.state.hasEmailError === false &&\n         this.state.hasPasswordError === false\n      ) {\n         const user = {\n            id: getUuid(),\n            email: emailInput,\n            password: hash(passwordInput),\n            createdOn: Date.now(),\n         };\n         console.log(\"created user object for POST\", user);\n         axios\n            .get(\n               \"https://raw.githubusercontent.com/Edd-wordd/white-bear-mpa/master/src/mock%20data/user.JSON\"\n            )\n            .then((res) => {\n               // handle success\n               const currentUser = res.data;\n               console.log(currentUser);\n               this.props.dispatch({\n                  type: actions.UPDATE_CURRENT_USER,\n                  payload: res.data,\n               });\n            })\n            .catch((error) => {\n               // handle error\n               console.log(error);\n            });\n         this.props.history.push(\"/create-answer\");\n      }\n   }\n   render() {\n      return (\n         <div className=\"offset-1 col-10 offset-sm-2 col-sm-8 offset-md-1 col-md-5 offset-lg-1 col-lg-4 offset-xl-1 col-xl-5\">\n            <div className=\"card p-3 mb-5\">\n               <h2 className=\"card-title\">Welcome back</h2>\n               <p className=\"mb-5\">\n                  Log in with your email address and password.\n               </p>\n               <label htmlFor=\"Login-email\">Email address</label>\n               <input\n                  type=\"email\"\n                  className={classnames({\n                     \"form-control\": true,\n                     \"is-invalid\": this.state.hasEmailError,\n                  })}\n                  id=\"Login-email\"\n               />\n               {this.state.hasEmailError && (\n                  <small className=\" mb-3 text-danger\">\n                     {this.state.emailError}\n                  </small>\n               )}\n\n               <label htmlFor=\"password\">Password</label>\n               <input\n                  type=\"password\"\n                  className={classnames({\n                     \"form-control\": true,\n                     \"is-invalid\": this.state.hasPasswordError,\n                  })}\n                  id=\"Login-password\"\n               />\n\n               {this.state.hasPasswordError && (\n                  <small className=\" mb-3 text-danger\">\n                     {this.state.passwordError}\n                  </small>\n               )}\n\n               <button\n                  id=\"loginPage\"\n                  className=\"btn btn-success float-right mt-4\"\n                  onClick={() => {\n                     this.validateAndVerifyUser();\n                  }}\n               >\n                  Log in\n               </button>\n            </div>\n         </div>\n      );\n   }\n}\nfunction mapStateToProps(state) {\n   return {};\n}\nexport default withRouter(connect(mapStateToProps)(Login));\n"]},"metadata":{},"sourceType":"module"}