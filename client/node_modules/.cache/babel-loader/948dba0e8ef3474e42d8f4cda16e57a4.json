{"ast":null,"code":"var _jsxFileName = \"/Users/edwardplasencio/Desktop/punchCode/white-bear-fullstack/client/src/components/UI/Login.js\";\nimport React from \"react\";\nimport classnames from \"classnames\";\nimport hash from \"object-hash\";\nimport { v4 as getUuid } from \"uuid\";\nimport { EMAIL_REGEX } from \"../../utils/helpers\";\nimport axios from \"axios\";\nimport actions from \"../../store/actions\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasLoginBeenClicked: false,\n      emailError: \"\"\n    };\n  }\n\n  loginClicked() {\n    this.setState({\n      hasLoginBeenClicked: true,\n      emailError: \"\",\n      passwordError: \"\",\n      hasEmailError: false\n    });\n  }\n\n  async setEmailState() {\n    const emailInput = document.getElementById(\"Login-email\").value;\n    const lowerCasedEmailInput = emailInput.toLowerCase();\n    if (emailInput === \"\") this.setState({\n      emailError: \"Please enter email address.\",\n      hasEmailError: true\n    });else if (EMAIL_REGEX.test(lowerCasedEmailInput) === false) {\n      this.setState({\n        emailError: \"Please enter VALID email address.\",\n        hasEmailError: true\n      });\n    } else {\n      this.setState({\n        emailError: \"\",\n        hasEmailError: false\n      });\n    }\n  }\n\n  async setPasswordState(passwordInput, emailInput) {\n    console.log(passwordInput);\n\n    if (passwordInput === \"\") {\n      this.setState({\n        passwordError: \"Please enter password.\",\n        hasPasswordError: true\n      });\n    } else if (passwordInput.length < 9) {\n      this.setState({\n        passwordError: \"Password must be 9 characters.\",\n        hasPasswordError: true\n      });\n    } else {\n      this.setState({\n        passwordError: \"\",\n        hasPasswordError: false\n      });\n    }\n  }\n\n  async validateAndVerifyUser() {\n    console.log(\"Validate me!\");\n    const emailInput = document.getElementById(\"Login-email\").value;\n    const passwordInput = document.getElementById(\"Login-password\").value;\n    await this.setEmailState(emailInput);\n    await this.setPasswordState(passwordInput, emailInput);\n\n    if (this.state.hasEmailError === false && this.state.hasPasswordError === false) {\n      const user = {\n        id: getUuid(),\n        email: emailInput,\n        password: hash(passwordInput),\n        createdOn: Date.now()\n      };\n      console.log(\"created user object for POST\", user);\n      axios.get(\"https://raw.githubusercontent.com/Edd-wordd/white-bear-mpa/master/src/mock%20data/user.JSON\").then(res => {\n        // handle success\n        const currentUser = res.data;\n        console.log(currentUser);\n        this.props.dispatch({\n          type: actions.UPDATE_CURRENT_USER,\n          payload: res.data\n        });\n      }).catch(error => {\n        // handle error\n        console.log(error);\n      });\n      this.props.history.push(\"/create-answer\");\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"offset-1 col-10 offset-sm-2 col-sm-8 offset-md-1 col-md-5 offset-lg-1 col-lg-4 offset-xl-1 col-xl-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card p-3 mb-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"card-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 16\n      }\n    }, \"Welcome back\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"mb-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 16\n      }\n    }, \"Log in with your email address and password.\"), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"Login-email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 16\n      }\n    }, \"Email address\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"email\",\n      className: classnames({\n        \"form-control\": true,\n        \"is-invalid\": this.state.hasEmailError\n      }),\n      id: \"Login-email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 16\n      }\n    }), this.state.hasEmailError && /*#__PURE__*/React.createElement(\"small\", {\n      className: \" mb-3 text-danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 19\n      }\n    }, this.state.emailError), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 16\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      className: classnames({\n        \"form-control\": true,\n        \"is-invalid\": this.state.hasPasswordError\n      }),\n      id: \"Login-password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 16\n      }\n    }), this.state.hasPasswordError && /*#__PURE__*/React.createElement(\"small\", {\n      className: \" mb-3 text-danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 19\n      }\n    }, this.state.passwordError), /*#__PURE__*/React.createElement(\"button\", {\n      id: \"loginPage\",\n      className: \"btn btn-success float-right mt-4\",\n      onClick: () => {\n        this.validateAndVerifyUser();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 16\n      }\n    }, \"Log in\")));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {};\n}\n\nexport default withRouter(connect(mapStateToProps)(Login));","map":{"version":3,"sources":["/Users/edwardplasencio/Desktop/punchCode/white-bear-fullstack/client/src/components/UI/Login.js"],"names":["React","classnames","hash","v4","getUuid","EMAIL_REGEX","axios","actions","connect","withRouter","Login","Component","constructor","props","state","hasLoginBeenClicked","emailError","loginClicked","setState","passwordError","hasEmailError","setEmailState","emailInput","document","getElementById","value","lowerCasedEmailInput","toLowerCase","test","setPasswordState","passwordInput","console","log","hasPasswordError","length","validateAndVerifyUser","user","id","email","password","createdOn","Date","now","get","then","res","currentUser","data","dispatch","type","UPDATE_CURRENT_USER","payload","catch","error","history","push","render","mapStateToProps"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport classnames from \"classnames\";\nimport hash from \"object-hash\";\nimport { v4 as getUuid } from \"uuid\";\nimport { EMAIL_REGEX } from \"../../utils/helpers\";\nimport axios from \"axios\";\nimport actions from \"../../store/actions\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\n\nclass Login extends React.Component {\n   constructor(props) {\n      super(props);\n      this.state = { hasLoginBeenClicked: false, emailError: \"\" };\n   }\n   loginClicked() {\n      this.setState({\n         hasLoginBeenClicked: true,\n         emailError: \"\",\n         passwordError: \"\",\n         hasEmailError: false,\n      });\n   }\n   async setEmailState() {\n      const emailInput = document.getElementById(\"Login-email\").value;\n      const lowerCasedEmailInput = emailInput.toLowerCase();\n      if (emailInput === \"\")\n         this.setState({\n            emailError: \"Please enter email address.\",\n            hasEmailError: true,\n         });\n      else if (EMAIL_REGEX.test(lowerCasedEmailInput) === false) {\n         this.setState({\n            emailError: \"Please enter VALID email address.\",\n            hasEmailError: true,\n         });\n      } else {\n         this.setState({ emailError: \"\", hasEmailError: false });\n      }\n   }\n\n   async setPasswordState(passwordInput, emailInput) {\n      console.log(passwordInput);\n      if (passwordInput === \"\") {\n         this.setState({\n            passwordError: \"Please enter password.\",\n            hasPasswordError: true,\n         });\n      } else if (passwordInput.length < 9) {\n         this.setState({\n            passwordError: \"Password must be 9 characters.\",\n            hasPasswordError: true,\n         });\n      } else {\n         this.setState({ passwordError: \"\", hasPasswordError: false });\n      }\n   }\n\n   async validateAndVerifyUser() {\n      console.log(\"Validate me!\");\n      const emailInput = document.getElementById(\"Login-email\").value;\n      const passwordInput = document.getElementById(\"Login-password\").value;\n\n      await this.setEmailState(emailInput);\n      await this.setPasswordState(passwordInput, emailInput);\n      if (\n         this.state.hasEmailError === false &&\n         this.state.hasPasswordError === false\n      ) {\n         const user = {\n            id: getUuid(),\n            email: emailInput,\n            password: hash(passwordInput),\n            createdOn: Date.now(),\n         };\n         console.log(\"created user object for POST\", user);\n         axios\n            .get(\n               \"https://raw.githubusercontent.com/Edd-wordd/white-bear-mpa/master/src/mock%20data/user.JSON\"\n            )\n            .then((res) => {\n               // handle success\n               const currentUser = res.data;\n               console.log(currentUser);\n               this.props.dispatch({\n                  type: actions.UPDATE_CURRENT_USER,\n                  payload: res.data,\n               });\n            })\n            .catch((error) => {\n               // handle error\n               console.log(error);\n            });\n         this.props.history.push(\"/create-answer\");\n      }\n   }\n   render() {\n      return (\n         <div className=\"offset-1 col-10 offset-sm-2 col-sm-8 offset-md-1 col-md-5 offset-lg-1 col-lg-4 offset-xl-1 col-xl-5\">\n            <div className=\"card p-3 mb-5\">\n               <h2 className=\"card-title\">Welcome back</h2>\n               <p className=\"mb-5\">\n                  Log in with your email address and password.\n               </p>\n               <label htmlFor=\"Login-email\">Email address</label>\n               <input\n                  type=\"email\"\n                  className={classnames({\n                     \"form-control\": true,\n                     \"is-invalid\": this.state.hasEmailError,\n                  })}\n                  id=\"Login-email\"\n               />\n               {this.state.hasEmailError && (\n                  <small className=\" mb-3 text-danger\">\n                     {this.state.emailError}\n                  </small>\n               )}\n\n               <label htmlFor=\"password\">Password</label>\n               <input\n                  type=\"password\"\n                  className={classnames({\n                     \"form-control\": true,\n                     \"is-invalid\": this.state.hasPasswordError,\n                  })}\n                  id=\"Login-password\"\n               />\n\n               {this.state.hasPasswordError && (\n                  <small className=\" mb-3 text-danger\">\n                     {this.state.passwordError}\n                  </small>\n               )}\n\n               <button\n                  id=\"loginPage\"\n                  className=\"btn btn-success float-right mt-4\"\n                  onClick={() => {\n                     this.validateAndVerifyUser();\n                  }}\n               >\n                  Log in\n               </button>\n            </div>\n         </div>\n      );\n   }\n}\nfunction mapStateToProps(state) {\n   return {};\n}\nexport default withRouter(connect(mapStateToProps)(Login));\n"]},"metadata":{},"sourceType":"module"}