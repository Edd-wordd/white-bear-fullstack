{"ast":null,"code":"import _toConsumableArray from\"/Users/edwardplasencio/Desktop/punchCode/white-bear-fullstack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/edwardplasencio/Desktop/punchCode/white-bear-fullstack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/edwardplasencio/Desktop/punchCode/white-bear-fullstack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/edwardplasencio/Desktop/punchCode/white-bear-fullstack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/edwardplasencio/Desktop/punchCode/white-bear-fullstack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/edwardplasencio/Desktop/punchCode/white-bear-fullstack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/edwardplasencio/Desktop/punchCode/white-bear-fullstack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import classnames from\"classnames\";import hash from\"object-hash\";import{v4 as getUuid}from\"uuid\";import{EMAIL_REGEX}from\"../../utils/helpers\";import{withRouter}from\"react-router-dom\";import{connect}from\"react-redux\";import axios from\"axios\";import actions from\"../../store/actions\";var SignUp=/*#__PURE__*/function(_React$Component){_inherits(SignUp,_React$Component);var _super=_createSuper(SignUp);function SignUp(props){var _this;_classCallCheck(this,SignUp);_this=_super.call(this,props);_this.state={isDisplayingInputs:false};return _this;}_createClass(SignUp,[{key:\"showInputs\",value:function showInputs(){this.setState({isDisplayingInputs:true,emailError:\"\",passwordError:\"\",hasEmailError:false,hasPasswordError:false});}},{key:\"setEmailState\",value:function(){var _setEmailState=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(emailInput){var lowerCasedEmailInput;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(emailInput);lowerCasedEmailInput=emailInput.toLowerCase();if(emailInput===\"\")this.setState({emailError:\"Please enter your email address.\",hasEmailError:true});else if(!EMAIL_REGEX.test(String(lowerCasedEmailInput))){this.setState({emailError:\"Please enter A VALID email address.\",hasEmailError:true});}else{this.setState({emailError:\"\",hasEmailError:false});}case 3:case\"end\":return _context.stop();}}},_callee,this);}));function setEmailState(_x){return _setEmailState.apply(this,arguments);}return setEmailState;}()},{key:\"checkHasLocalPart\",value:function checkHasLocalPart(passwordInput,emailInput){var localPart=emailInput.split(\"@\")[0];if(localPart===\"\")return false;else if(localPart.length<4)return false;else return passwordInput.includes(localPart);}},{key:\"setPasswordState\",value:function(){var _setPasswordState=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(passwordInput,emailInput){var uniqChars;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(passwordInput);uniqChars=_toConsumableArray(new Set(passwordInput));if(passwordInput===\"\"){this.setState({passwordError:\"Please create a password.\",hasPasswordError:true});}else if(passwordInput.length<9){this.setState({passwordError:\"Password must be 9 characters.\",hasPasswordError:true});}else if(this.checkHasLocalPart(passwordInput,emailInput)){this.setState({passwordError:\"Password cannot contain your email address.\",hasPasswordError:true});}else if(uniqChars.length<3){this.setState({passwordError:\"Password msut contain more then 3 unique characters.\",hasPasswordError:true});}else{this.setState({passwordError:\"\",hasPasswordError:false});}case 3:case\"end\":return _context2.stop();}}},_callee2,this);}));function setPasswordState(_x2,_x3){return _setPasswordState.apply(this,arguments);}return setPasswordState;}()},{key:\"validateAndCreateUser\",value:function(){var _validateAndCreateUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var _this2=this;var emailInput,passwordInput,user;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:emailInput=document.getElementById(\"email-input\").value;passwordInput=document.getElementById(\"password-input\").value;_context3.next=4;return this.setEmailState(emailInput);case 4:_context3.next=6;return this.setPasswordState(passwordInput,emailInput);case 6:if(this.state.hasEmailError===false&&this.state.hasPasswordError===false){user={id:getUuid(),email:emailInput,password:hash(passwordInput),createdOn:Date.now()};console.log(\"created user object for POST\",user);axios.get(\"https://raw.githubusercontent.com/Edd-wordd/white-bear-mpa/master/src/mock%20data/user.JSON\").then(function(res){// handle success\nvar currentUser=res.data;console.log(currentUser);_this2.props.dispatch({type:actions.UPDATE_CURRENT_USER,payload:res.data});}).catch(function(error){// handle error\nconsole.log(error);});this.props.history.push(\"/create-answer\");}case 7:case\"end\":return _context3.stop();}}},_callee3,this);}));function validateAndCreateUser(){return _validateAndCreateUser.apply(this,arguments);}return validateAndCreateUser;}()},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"offset-1 col-10 offset-sm-2 col-sm-8 offset-md-1 col-md-5 offset-lg-2 col-lg-4 offset-xl-1 col-xl-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card p-3 mb-5\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"card-title\"},\"Nice to meet you\"),/*#__PURE__*/React.createElement(\"p\",{className:\"mb-5\"},\"Sign up for White Bear. Free forever\"),this.state.isDisplayingInputs&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"p\",{className:\"mb-5 text-success\"},\"Let's get you signed up.\"),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"email\"},\"Email address\"),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",className:classnames({\"form-control\":true,\"is-invalid\":this.state.hasEmailError}),id:\"email-input\"}),this.state.hasEmailError&&/*#__PURE__*/React.createElement(\"small\",{className:\"text-danger mb-3\"},this.state.emailError),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"password\"},\"Create a password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",className:classnames({\"form-control\":true,\"is-invalid\":this.state.hasPasswordError}),id:\"password-input\"}),this.state.hasPasswordError&&/*#__PURE__*/React.createElement(\"div\",{className:\"text-danger \"},/*#__PURE__*/React.createElement(\"small\",null,this.state.passwordError)),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-success float-right btn-block btn-lg  mt-3\",onClick:function onClick(){_this3.validateAndCreateUser();}},\"Let's go!\")),!this.state.isDisplayingInputs&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-success float-right w-100 car btn-lg\",onClick:function onClick(){_this3.showInputs();}},\"Sign up\"))));}}]);return SignUp;}(React.Component);function mapStateToProps(state){return{};}export default withRouter(connect(mapStateToProps)(SignUp));","map":{"version":3,"sources":["/Users/edwardplasencio/Desktop/punchCode/white-bear-fullstack/client/src/components/UI/SignUp.js"],"names":["React","classnames","hash","v4","getUuid","EMAIL_REGEX","withRouter","connect","axios","actions","SignUp","props","state","isDisplayingInputs","setState","emailError","passwordError","hasEmailError","hasPasswordError","emailInput","console","log","lowerCasedEmailInput","toLowerCase","test","String","passwordInput","localPart","split","length","includes","uniqChars","Set","checkHasLocalPart","document","getElementById","value","setEmailState","setPasswordState","user","id","email","password","createdOn","Date","now","get","then","res","currentUser","data","dispatch","type","UPDATE_CURRENT_USER","payload","catch","error","history","push","validateAndCreateUser","showInputs","Component","mapStateToProps"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport classnames from \"classnames\";\nimport hash from \"object-hash\";\nimport { v4 as getUuid } from \"uuid\";\nimport { EMAIL_REGEX } from \"../../utils/helpers\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport axios from \"axios\";\nimport actions from \"../../store/actions\";\n\nclass SignUp extends React.Component {\n   constructor(props) {\n      super(props);\n      this.state = {\n         isDisplayingInputs: false,\n      };\n   }\n   showInputs() {\n      this.setState({\n         isDisplayingInputs: true,\n         emailError: \"\",\n         passwordError: \"\",\n         hasEmailError: false,\n         hasPasswordError: false,\n      });\n   }\n   async setEmailState(emailInput) {\n      console.log(emailInput);\n      const lowerCasedEmailInput = emailInput.toLowerCase();\n\n      if (emailInput === \"\")\n         this.setState({\n            emailError: \"Please enter your email address.\",\n            hasEmailError: true,\n         });\n      else if (!EMAIL_REGEX.test(String(lowerCasedEmailInput))) {\n         this.setState({\n            emailError: \"Please enter A VALID email address.\",\n            hasEmailError: true,\n         });\n      } else {\n         this.setState({ emailError: \"\", hasEmailError: false });\n      }\n   }\n   checkHasLocalPart(passwordInput, emailInput) {\n      const localPart = emailInput.split(\"@\")[0];\n      if (localPart === \"\") return false;\n      else if (localPart.length < 4) return false;\n      else return passwordInput.includes(localPart);\n   }\n\n   async setPasswordState(passwordInput, emailInput) {\n      console.log(passwordInput);\n      const uniqChars = [...new Set(passwordInput)];\n      if (passwordInput === \"\") {\n         this.setState({\n            passwordError: \"Please create a password.\",\n            hasPasswordError: true,\n         });\n      } else if (passwordInput.length < 9) {\n         this.setState({\n            passwordError: \"Password must be 9 characters.\",\n            hasPasswordError: true,\n         });\n      } else if (this.checkHasLocalPart(passwordInput, emailInput)) {\n         this.setState({\n            passwordError: \"Password cannot contain your email address.\",\n            hasPasswordError: true,\n         });\n      } else if (uniqChars.length < 3) {\n         this.setState({\n            passwordError:\n               \"Password msut contain more then 3 unique characters.\",\n            hasPasswordError: true,\n         });\n      } else {\n         this.setState({ passwordError: \"\", hasPasswordError: false });\n      }\n   }\n\n   async validateAndCreateUser() {\n      const emailInput = document.getElementById(\"email-input\").value;\n      const passwordInput = document.getElementById(\"password-input\").value;\n\n      await this.setEmailState(emailInput);\n      await this.setPasswordState(passwordInput, emailInput);\n      if (\n         this.state.hasEmailError === false &&\n         this.state.hasPasswordError === false\n      ) {\n         const user = {\n            id: getUuid(),\n            email: emailInput,\n            password: hash(passwordInput),\n            createdOn: Date.now(),\n         };\n         console.log(\"created user object for POST\", user);\n         axios\n            .get(\n               \"https://raw.githubusercontent.com/Edd-wordd/white-bear-mpa/master/src/mock%20data/user.JSON\"\n            )\n            .then((res) => {\n               // handle success\n               const currentUser = res.data;\n               console.log(currentUser);\n               this.props.dispatch({\n                  type: actions.UPDATE_CURRENT_USER,\n                  payload: res.data,\n               });\n            })\n            .catch((error) => {\n               // handle error\n               console.log(error);\n            });\n         this.props.history.push(\"/create-answer\");\n      }\n   }\n   render() {\n      return (\n         <div className=\"offset-1 col-10 offset-sm-2 col-sm-8 offset-md-1 col-md-5 offset-lg-2 col-lg-4 offset-xl-1 col-xl-4\">\n            <div className=\"card p-3 mb-5\">\n               <h2 className=\"card-title\">Nice to meet you</h2>\n               <p className=\"mb-5\">Sign up for White Bear. Free forever</p>\n               {this.state.isDisplayingInputs && (\n                  <>\n                     <p className=\"mb-5 text-success\">\n                        Let's get you signed up.\n                     </p>\n\n                     <label htmlFor=\"email\">Email address</label>\n                     <input\n                        type=\"email\"\n                        className={classnames({\n                           \"form-control\": true,\n                           \"is-invalid\": this.state.hasEmailError,\n                        })}\n                        id=\"email-input\"\n                     />\n\n                     {this.state.hasEmailError && (\n                        <small className=\"text-danger mb-3\">\n                           {this.state.emailError}\n                        </small>\n                     )}\n\n                     <label htmlFor=\"password\">Create a password</label>\n                     <input\n                        type=\"password\"\n                        className={classnames({\n                           \"form-control\": true,\n                           \"is-invalid\": this.state.hasPasswordError,\n                        })}\n                        id=\"password-input\"\n                     />\n                     {this.state.hasPasswordError && (\n                        <div className=\"text-danger \">\n                           <small>{this.state.passwordError}</small>\n                        </div>\n                     )}\n\n                     <button\n                        className=\"btn btn-success float-right btn-block btn-lg  mt-3\"\n                        onClick={() => {\n                           this.validateAndCreateUser();\n                        }}\n                     >\n                        Let's go!\n                     </button>\n                  </>\n               )}\n               {!this.state.isDisplayingInputs && (\n                  <>\n                     <button\n                        className=\"btn btn-success float-right w-100 car btn-lg\"\n                        onClick={() => {\n                           this.showInputs();\n                        }}\n                     >\n                        Sign up\n                     </button>\n                  </>\n               )}\n            </div>\n         </div>\n      );\n   }\n}\nfunction mapStateToProps(state) {\n   return {};\n}\nexport default withRouter(connect(mapStateToProps)(SignUp));\n"]},"metadata":{},"sourceType":"module"}